<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <title>Sudut Keliling</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/p5.min.js"></script>
  <style>
    html, body {
      margin: 0;
      background: transparent !important;
      overflow: hidden;
    }
    canvas {
      display: block;
      background: transparent !important;
    }
  </style>
</head>
<body>

<script>
let pusat;
let r; // ðŸ”¹ RADIUS DISAMAKAN DENGAN DIAMETER
let A, B, C;
let dragged = null;

function setup() {
  createCanvas(1200, 700); // ðŸ”¹ CANVAS SAMA
  pusat = createVector(width/2, height/2);

  r = min(width, height) * 0.285; // ðŸ”¹ SAMA PERSIS DENGAN DIAMETER

  A = createVector(pusat.x + r * cos(PI/4), pusat.y + r * sin(PI/4));
  B = createVector(pusat.x + r * cos(3*PI/2), pusat.y + r * sin(3*PI/2));
  C = createVector(pusat.x + r * cos(5*PI/4), pusat.y + r * sin(5*PI/4));
}

function draw() {
  clear();

  // Lingkaran
  noFill();
  stroke(0,0,255); // ðŸ”¹ DIUBAH KE BIRU
  strokeWeight(2);
  ellipse(pusat.x, pusat.y, 2*r, 2*r);

  // Sudut A & B
  let aA = atan2(A.y - pusat.y, A.x - pusat.x);
  let aB = atan2(B.y - pusat.y, B.x - pusat.x);

  let startAngle, endAngle;
  let diff = abs(aA - aB);

  if (diff > PI) {
    startAngle = max(aA, aB);
    endAngle = min(aA, aB) + TWO_PI;
  } else {
    startAngle = min(aA, aB);
    endAngle = max(aA, aB);
  }

  let angleAOB = abs(endAngle - startAngle);
  if (angleAOB > PI) angleAOB = TWO_PI - angleAOB;

  let angleAOB_deg = degrees(angleAOB);
  let angleACB_deg = angleAOB_deg / 2;

  // Sudut keliling
  stroke(0,150,0); // ðŸ”¹ DIUBAH KE HIJAU
  strokeWeight(2);
  line(C.x, C.y, A.x, A.y);
  line(C.x, C.y, B.x, B.y);

  let vCA = createVector(A.x - C.x, A.y - C.y);
  let vCB = createVector(B.x - C.x, B.y - C.y);

  let ang1 = atan2(vCA.y, vCA.x);
  let ang2 = atan2(vCB.y, vCB.x);

  if (abs(ang1 - ang2) > PI) {
    if (ang1 < ang2) ang1 += TWO_PI;
    else ang2 += TWO_PI;
  }
  let s = min(ang1, ang2);
  let e = max(ang1, ang2);

  push();
  translate(C.x, C.y);
  noFill();
  stroke(255,0,0); // ðŸ”¹ BUSUR SUDUT KELILING DIUBAH KE MERAH
  strokeWeight(2);
  arc(0, 0, 50, 50, s, e);
  pop();

  // Angka sudut keliling
  fill(0,150,0); // ðŸ”¹ DIUBAH KE HIJAU
  textSize(18);
  let midC = (s + e)/2;
  text(
    nf(angleACB_deg,0,1)+"Â°",
    C.x + 55*cos(midC),
    C.y + 55*sin(midC)
  );

  // Titik-titik
  noStroke();
  fill(255,0,0);
  ellipse(pusat.x, pusat.y, 10);

  fill(0,100,255);
  ellipse(A.x, A.y, 12);
  ellipse(B.x, B.y, 12);
  ellipse(C.x, C.y, 12);

  // Label
  fill(0);
  textSize(14);
  text("O", pusat.x, pusat.y - 12);
  text("A", A.x + 12, A.y);
  text("B", B.x + 12, B.y);
  text("C", C.x, C.y - 12);
}

function mousePressed() {
  if (dist(mouseX, mouseY, A.x, A.y) < 12) dragged = A;
  else if (dist(mouseX, mouseY, B.x, B.y) < 12) dragged = B;
  else if (dist(mouseX, mouseY, C.x, C.y) < 12) dragged = C;
}

function mouseDragged() {
  if (dragged) {
    let v = createVector(mouseX - pusat.x, mouseY - pusat.y);
    v.normalize().mult(r);
    dragged.x = pusat.x + v.x;
    dragged.y = pusat.y + v.y;
  }
}

function mouseReleased() {
  dragged = null;
}
</script>

</body>
</html>
